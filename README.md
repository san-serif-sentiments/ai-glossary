# AI Glossary

A friendly, citation-backed glossary that keeps product, engineering, safety, and policy teams aligned on the language of artificial intelligence. Every term lives in structured YAML so the same content can power documentation, APIs, search, and downstream tools. The project is maintained by Shailesh Rawat (`@sans_serif_sentiments`).

---

## At a glance

- **100+ curated terms** covering LLM internals, agent operations, governance, and risk controls.
- **Single source of truth** – YAML drives the static site, search index, and FastAPI backend.
- **Beginner-friendly tooling** – Make targets wrap the common workflows so you can validate, build, and serve with a couple of commands.
- **Governance ready** – Each term includes NIST RMF tags, lifecycle status, and citations for auditability.

---

## Prerequisites

- macOS, Linux, or WSL with a recent shell
- Python **3.10 or newer**
- `git` (for cloning the repo)
- (Optional) Internet access when you want to download the `sentence-transformers` model for related-term suggestions

---

## Quickstart (TL;DR)

```bash
# 1. Clone the repository
git clone https://github.com/san-serif-sentiments/ai-glossary.git
cd ai-glossary

# 2. Create the virtual environment and install dependencies
make venv
source .venv/bin/activate

# 3. Build the glossary assets (JSON + Markdown)
make build

# 4. Run the docs locally (press Ctrl+C to stop)
mkdocs serve -f site/mkdocs.yml
# open http://127.0.0.1:8000 in your browser
```

You now have the static site, search UI, and generated term pages available locally. Leave `mkdocs serve` running to see live updates while you edit term files.

---

## Detailed setup guide

### 1. Create and activate the virtual environment

```bash
make venv
source .venv/bin/activate
```

The `make venv` target installs everything listed in `requirements.txt` inside `.venv/`. You only need to do this once per machine.

Prefer manual setup?

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

### 2. Validate the glossary content

```bash
make validate
```

This checks every YAML file against `schema/term.schema.json` and catches missing citations, invalid roles, or definition length issues before they land in git.

### 3. Regenerate derived assets

```bash
make build
```

`make build` runs two scripts:

1. `scripts/build_index.py` → creates `build/glossary.json` + `build/search-index.json` + `site/docs/assets/glossary-search.json`
2. `scripts/render_docs.py` → generates Markdown pages for each term under `site/docs/terms/`

### 4. Preview the docs

```bash
mkdocs serve -f site/mkdocs.yml
```

Navigate to `http://127.0.0.1:8000` to explore the site, including the interactive search page and role starter packs. MkDocs auto-reloads the page when files change.

### 5. Run the automated tests (optional but recommended)

```bash
make check
```

This command validates the data, runs the Python unit tests, and builds the docs in strict mode to ensure there are no broken links or warnings.

---

## Running the FastAPI backend

1. Activate your virtual environment (`source .venv/bin/activate`).
2. Rebuild assets if you have edited any YAML (`make build`). The API reads from the JSON written during the build step.
3. Start the service:

   ```bash
   make serve-api
   # or
   uvicorn api.main:app --reload
   ```

4. The API serves on `http://127.0.0.1:8000`. Try the interactive docs at `http://127.0.0.1:8000/docs` or hit endpoints such as:

   - `GET /terms?q=agent`
   - `GET /terms?status=reviewed`
   - `GET /terms/tool-use`
   - `POST /refresh` (re-reads `build/glossary.json` without restarting the server)

If you want the backend to reflect new YAML edits, run `make build` (or `make validate && make build`) and then trigger `POST /refresh`.

---

## Refreshing related-term panels

The docs surface “Related terms” callouts generated by `scripts/enrich_related_terms.py`.

1. Ensure you have the optional dependency installed:

   ```bash
   source .venv/bin/activate
   pip install sentence-transformers==2.2.2
   ```

2. Connect to the internet so the script can download the `all-MiniLM-L6-v2` model from Hugging Face the first time it runs.
3. Execute the script:

   ```bash
   .venv/bin/python scripts/enrich_related_terms.py
   ```

   - When the model downloads successfully, embeddings come from MiniLM and similarity scores are written to `build/related.json`.
   - If you are offline, the script automatically falls back to a fast TF‑IDF calculation so related-term panels still render (less accurate, but zero dependencies).

4. Rebuild the docs (`make build`) if you want MkDocs to pick up the refreshed includes.

Tip: Whenever you add new terms or change long descriptions, rerun the script so the recommendations stay current.

**Having trouble downloading the model?**

- Make sure outbound HTTPS to `https://huggingface.co` is allowed; the MiniLM weights only download the first time.
- If you see `hf_hub_download() got an unexpected keyword argument 'url'`, install a compatible hub client:
  ```bash
  pip install --upgrade 'huggingface_hub==0.34.4'
  ```
  then rerun `.venv/bin/python scripts/enrich_related_terms.py`.
- Prefer to work offline? Download the model once and point the script at it:
  ```bash
  huggingface-cli download sentence-transformers/all-MiniLM-L6-v2 \
    --local-dir models/all-MiniLM-L6-v2 --local-dir-use-symlinks False
  ```
  (Newer CLIs accept the shorter `hf download … --local-dir models/all-MiniLM-L6-v2`.)
  The script automatically checks `models/all-MiniLM-L6-v2`. Prefer a different folder? Set
  `export GLOSSARY_EMBEDDING_MODEL_PATH=/path/to/local/model` before running the command.
- All embedding logic lives in [`scripts/enrich_related_terms.py`](scripts/enrich_related_terms.py); check the `embed_texts` function if you want to customise behaviour.

**MiniLM cache cheat sheet**

Once the model is downloaded locally you can run the script offline:

```bash
export GLOSSARY_EMBEDDING_MODEL_PATH="$(pwd)/models/all-MiniLM-L6-v2"  # adjust if you used a custom path
source .venv/bin/activate
python scripts/enrich_related_terms.py
```

Pros:

- No network calls after the first download.
- Everyone on your team gets consistent related-term panels.

Watch-outs:

- The model folder is large; it is ignored by `.gitignore` (`models/` and `site/models/`) and should not be committed.
- If Hugging Face publishes an updated checkpoint you will need to re-download it manually.

---

## Sharing the glossary

You have two easy ways to produce a shareable link:

**Option 1 – GitHub Pages**
1. Build the static site locally: `mkdocs build -f site/mkdocs.yml` (already covered by `make build`).
2. Publish with: `mkdocs gh-deploy -f site/mkdocs.yml`.
3. GitHub serves the site at `https://<your-username>.github.io/<repo-name>/`.

**Option 2 – Any static host (Netlify, Vercel, S3, etc.)**
1. Run `mkdocs build -f site/mkdocs.yml`.
2. Upload the generated `site/site/` directory to your hosting provider.

Need teammates to preview locally? They can clone the repo, run `make build`, then `mkdocs serve -f site/mkdocs.yml` to explore at `http://127.0.0.1:8000`.

---

## Make targets cheat sheet

| Command | What it does |
| --- | --- |
| `make venv` | Creates `.venv/` and installs dependencies. |
| `make validate` | Validates all YAML against the schema. |
| `make build` | Rebuilds JSON indexes and Markdown docs. |
| `make render-docs` | Only regenerate Markdown term pages (skip indexes). |
| `make serve-api` | Starts the FastAPI backend with auto-reload. |
| `make preview` | Runs `mkdocs serve` using the repo root config. |
| `make check` | Runs validation, unit tests, and `mkdocs build --strict`. |
| `make new-term NAME="Your Term"` | Creates a scaffold YAML file in `data/terms/`. |
| `make github-push MESSAGE="..."` | Runs checks, commits staged files with your message, and pushes to `origin main`. |
| `make gh-pages` | Builds the site in strict mode and deploys it to GitHub Pages (`mkdocs gh-deploy`). |

---

## Repository layout (reference)

```
ai-glossary/
  README.md                ← You are here
  requirements.txt         ← Python dependencies
  schema/term.schema.json  ← JSON Schema for every term
  data/terms/*.yml         ← Canonical glossary entries
  scripts/                 ← Helper scripts (build, validate, enrich related terms)
  api/main.py              ← FastAPI application
  site/                    ← MkDocs configuration and generated docs
  tests/                   ← Unit tests for the API layer
  build/                   ← Generated JSON artifacts (ignored by git)
```

---

## Authoring term files

Each YAML file in `data/terms/` must satisfy the JSON schema. Highlights:

- **Naming** – File name should match the slugified `term` (e.g., `reinforcement-learning-from-human-feedback.yml`).
- **Aliases** – Provide alternative names or abbreviations. They power search and API alias lookups.
- **Categories & roles** – Drive navigation and filters. Valid roles: `product`, `engineering`, `data_science`, `policy`, `legal`, `security`, `communications`.
- **Definitions** – Keep `short_def` under 320 characters. Aim for 80–220 words in `long_def`.
- **Audience guidance** – Add actionable bullet points in `examples.do`/`examples.dont`, plus `audiences.exec` and `audiences.engineer` perspectives.
- **Governance** – Include NIST RMF tags and risk notes where relevant.
- **Lifecycle** – Update `status` (`draft`, `reviewed`, `approved`, `deprecated`) and `last_reviewed` when you make changes.
- **Citations** – Minimum one reputable source; two is better.

Run `make validate` before committing to catch schema issues early.

---

## Common workflows

- **Add a brand-new term**
  1. `make new-term NAME="Memory Strategy"`
  2. Fill in the placeholders in `data/terms/memory-strategy.yml`
  3. `make validate && make build`
  4. Preview with `mkdocs serve -f site/mkdocs.yml`

- **Edit an existing definition**
  1. Update the YAML file in `data/terms/`
  2. Bump `last_reviewed` and `status` if appropriate
  3. `make validate && make build`
  4. Optionally rerun `.venv/bin/python scripts/enrich_related_terms.py`

- **Expose the API for a prototype**
  1. Run `make build`
  2. Start FastAPI with `make serve-api`
  3. Consume endpoints from your app or Postman (see [Running the FastAPI backend](#running-the-fastapi-backend))

---

## Troubleshooting

| Symptom | Fix |
| --- | --- |
| `ImportError: sentence_transformers` | Install the optional dependency: `pip install sentence-transformers==2.2.2`. |
| `Failed to resolve huggingface.co` when running the related-term script | Ensure you are online or behind a proxy that allows outbound HTTPS; otherwise the fallback TF‑IDF embeddings are used automatically. |
| MkDocs build complains about `includes/related/*.md` not in nav | Expected behaviour. These files are partials that get embedded in term pages. |
| Validation error about roles | Only use roles from the allowed list (`product`, `engineering`, `data_science`, `policy`, `legal`, `security`, `communications`). |
| Long definition too short/long | Aim for 80–220 words. The validator will show the exact count so you can adjust quickly. |

Still stuck? Open an issue or ping `@sans_serif_sentiments`.

---

## Contributing

We welcome improvements! Please review:

- [CONTRIBUTING.md](CONTRIBUTING.md)
- [CODE_OF_CONDUCT.md](CODE_OF_CONDUCT.md)

Before submitting a PR, run:

```bash
make validate
make build
make check
```

Thank you for helping keep the AI Glossary accurate, accessible, and inclusive.

---

## Licensing

- Code is released under the [MIT License](LICENSE).
- All glossary content (YAML files) is licensed under [CC BY-SA 4.0](CONTENT_LICENSE).
